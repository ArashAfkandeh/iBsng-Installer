# ูุตุจ ุขุณุงู iBsng ุจู ููุฑุงู ุฑุจุงุช ูพุดุชุจุงูโฺฏุฑ ุชูฺฏุฑุงู

<div dir="rtl">

## ๐ ูุนุฑู

ุงู ูพุฑูฺู ฺฉ ุฑุงูฺฉุงุฑ ฺฉุงูู ู ุฎูุฏฺฉุงุฑ ุจุฑุง **ูุตุจุ ูุฏุฑุช ู ูพุดุชุจุงูโฺฏุฑ ุงุฒ ุณุฑูุณ IBSng** ุจุง ุงุณุชูุงุฏู ุงุฒ Docker ุงุณุช ฺฉู ุจุง ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู ุงุฏุบุงู ุดุฏู ุงุณุช. ุจุง ุงู ุงุจุฒุงุฑ ูโุชูุงูุฏ ุจู ุฑุงุญุช ุณุฑูุณ IBSng ุฑุง ุฑุงูโุงูุฏุงุฒ ฺฉุฑุฏู ู ุงุฒ ูพุงฺฏุงู ุฏุงุฏู ุขู ุจู ุตูุฑุช ููุธู ู ุฎูุฏฺฉุงุฑ ูุณุฎู ูพุดุชุจุงู ุชูู ฺฉูุฏ. ูุงูโูุง ูพุดุชุจุงู ุจู ุทูุฑ ูุณุชูู ุจู ฺุช ุชูฺฏุฑุงู ุดูุง ุงุฑุณุงู ูโุดููุฏ ู ุดูุง ูโุชูุงูุฏ ุงุฒ ุทุฑู ุฏุณุชูุฑุงุช ุฑุจุงุชุ ุนููุงุช ูพุดุชุจุงูโฺฏุฑ ู ุจุงุฒุงุจ ุฑุง ูุฏุฑุช ฺฉูุฏ.

## ๐ฏ ูฺฺฏโูุง ฺฉูุฏ

- โ **ูุตุจ ุชูุงู ุฎูุฏฺฉุงุฑ**: ุงุณฺฉุฑูพุช ูุตุจ ููุดููุฏ ฺฉู ุชูุงู ูพุดโูุงุฒูุง ุงุฒ ุฌููู Dockerุ Docker Compose ู ุงุจุฒุงุฑูุง Python ุฑุง ุจุฑ ุฑู ุณุฑูุฑ ุดูุง ูุตุจ ูโฺฉูุฏ.
- โ๏ธ **ูพฺฉุฑุจูุฏ ุชุนุงูู**: ุฏุฑ ููฺฏุงู ูุตุจุ ูพูุฑุชโูุง ููุฑุฏ ูุงุฒ (ูุจุ RADIUS) ู ุงุทูุงุนุงุช ุฑุจุงุช ุชูฺฏุฑุงู ุจู ุตูุฑุช ุชุนุงูู ุงุฒ ุดูุง ุฏุฑุงูุช ูโุดูุฏ.
- ๐พ **ุฐุฎุฑูโุณุงุฒ ูพุงุฏุงุฑ ุฏุงุฏูโูุง**: ุชูุงู ุงุทูุงุนุงุช ูพุงฺฏุงู ุฏุงุฏู PostgreSQL ุฏุฑ ูุณุฑ `/opt/ibsng/pgsql` ุจุฑ ุฑู ูุงุณุช ุฐุฎุฑู ูโุดูุฏ ุชุง ุจุง ุญุฐู ุง ุขูพุฏุช ฺฉุงูุชูุฑ ุงุฒ ุจู ูุฑูุฏ.
- ๐ค **ุงุฏุบุงู ฺฉุงูู ุจุง ุชูฺฏุฑุงู**:
  - **ุงุฑุณุงู ุฎูุฏฺฉุงุฑ ุจฺฉุงูพ**: ูุงูโูุง ูพุดุชุจุงู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ู ุจุง ฺฉูพุดู ุชุงุฑุฎ ุดูุณ ุจู ฺุช ุง ฺฉุงูุงู ุชูฺฏุฑุงู ุดูุง ุงุฑุณุงู ูโุดููุฏ.
  - **ุฑุจุงุช ูุฏุฑุช**: ุจุง ุฏุณุชูุฑุงุช ุณุงุฏู ุจู ุฑุจุงุชุ ุณุฑูุณ ุฎูุฏ ุฑุง ูุฏุฑุช ฺฉูุฏ.
  - **ูพฺฉุฑุจูุฏ ูพูุง**: ุญุฏุงูู ูุงุตูู ุฒูุงู ุจู ุจฺฉุงูพโูุง ุฑุง ูุณุชููุงู ุงุฒ ุทุฑู ุฏุณุชูุฑุงุช ุฑุจุงุช ุชุบุฑ ุฏูุฏ.
- ๐ **ูพุดุชุจุงูโฺฏุฑ ููุดููุฏ**:
  - **ุฒูุงูโุจูุฏ ุฎูุฏฺฉุงุฑ**: ุจฺฉุงูพโฺฏุฑ ุฏุฑ ููุงุตู ุฒูุงู ูุดุฎุต (ูุงุจู ุชูุธู) ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ูโุดูุฏ.
  - **ฺฉูุชุฑู ูุงุตูู ุฒูุงู**: ุฌููฺฏุฑ ุงุฒ ุจฺฉุงูพโูุง ูฺฉุฑุฑ ุจุฑุง ุญูุธ ููุงุจุน ุณุณุชู.
  - **ุจฺฉุงูพโฺฏุฑ ุฏุณุช**: ูุฑ ุฒูุงู ฺฉู ุจุฎูุงูุฏุ ุจุง ุฏุณุชูุฑ `/backup` ฺฉ ูุณุฎู ูพุดุชุจุงู ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ.
- ๐ **ุจุงุฒุงุจ ุขุณุงู ู ุณุฑุน**:
  - **ุจุงุฒุงุจ ุงุฒ ุทุฑู ุชูฺฏุฑุงู**: ูุงู ุจฺฉุงูพ ุฑุง ุจุฑุง ุฑุจุงุช ุงุฑุณุงู ฺฉูุฏ ุชุง ุนููุงุช ุจุงุฒุงุจ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงูุฌุงู ุดูุฏ.
  - **ุดูุงุณุง ููุดููุฏ ูุฑูุช**: ุงุณฺฉุฑูพุช ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุฑูุชโูุง ูุฎุชูู ุจฺฉุงูพ (`.dump.gz` ุณูุงุฑุด ุง `.bak` ูุชู) ุฑุง ุชุดุฎุต ูโุฏูุฏ.
- ๐ **ุจุฑุฑุณ ูุถุนุช**: ุจุง ุฏุณุชูุฑ `/status` ุงุฒ ูุถุนุช ุขุฎุฑู ุจฺฉุงูพ ู ุฒูุงู ุขู ูุทูุน ุดูุฏ.
- ๐ก๏ธ **ุณุฑูุณ ูพุงุฏุงุฑ Systemd**: ุงุณฺฉุฑูพุช ูพุดุชุจุงูโฺฏุฑ ุจู ุนููุงู ฺฉ ุณุฑูุณ ุฏุงุฆู (`ibsng-backup.service`) ุฏุฑ ูพุณโุฒููู ุงุฌุฑุง ูโุดูุฏ ุชุง ููุดู ูุนุงู ุจูุงูุฏ ู ุฏุฑ ุตูุฑุช ุจุฑูุฒ ูุดฺฉู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฑโุงุณุชุงุฑุช ุดูุฏ.
-  firewall **ูพฺฉุฑุจูุฏ ุฎูุฏฺฉุงุฑ ูุงุฑูุงู**: ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู UFWุ ูพูุฑุชโูุง ููุฑุฏ ูุงุฒ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุจุงุฒ ูโุดููุฏ.
- ๐๏ธ **ูุฏุฑุช ุฎูุฏฺฉุงุฑ ูุงูโูุง**: ูุงูโูุง ุจฺฉุงูพ ูุญู ูพุณ ุงุฒ ุงุฑุณุงู ูููู ุจู ุชูฺฏุฑุงู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดููุฏ ุชุง ูุถุง ุฏุณฺฉ ุงุดุบุงู ูุดูุฏ.

## ๐ ูุงุฒููุฏโูุง

- **ุณุณุชู ุนุงูู**: **Ubuntu 22.04**
- **ุฏุณุชุฑุณ**: ุฏุณุชุฑุณ `root` ุง ฺฉุงุฑุจุฑ ุจุง ุฏุณุชุฑุณ `sudo`.

## โก ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

ุจุฑุง ูุตุจุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุณุฑูุฑ ุฎูุฏ ุงุฌุฑุง ฺฉูุฏ. ุงู ุฏุณุชูุฑ ุงุณฺฉุฑูพุช ูุตุจ ุฑุง ุฏุงูููุฏ ู ุงุฌุฑุง ูโฺฉูุฏ:

```bash
curl -sSL https://raw.githubusercontent.com/ArashAfkandeh/iBsng-Installer/main/install_ibsng.sh | sudo bash
```

### ูุฑุงุญู ูุตุจ ฺู ฺฉุงุฑ ุงูุฌุงู ูโุฏูุฏุ

1.  **ุจุฑุฑุณ ุฏุณุชุฑุณ**: ุงุทููุงู ุงุฒ ุงุฌุฑุง ุงุณฺฉุฑูพุช ุจุง ุฏุณุชุฑุณ `root`.
2.  **ูุตุจ ูพุดโูุงุฒูุง**: ูุตุจ Dockerุ Docker Composeุ Gitุ Python ู ุณุงุฑ ุจุณุชูโูุง ุถุฑูุฑ.
3.  **ูพฺฉุฑุจูุฏ ุชุนุงูู**: ุงุฒ ุดูุง ุจุฑุง ุชูุธู ูพูุฑุชโูุง ูุจ ู RADIUS ู ููฺูู ุชูฺฉู ู ุดูุงุณู ฺุช ุฑุจุงุช ุชูฺฏุฑุงู ุณูุงู ูโุดูุฏ. (ุจุฑุง ุฑุฏ ฺฉุฑุฏู ูโุชูุงูุฏ Enter ุจุฒูุฏ).
4.  **ุฑุงูโุงูุฏุงุฒ ฺฉุงูุชูุฑ**: ุฏุงูููุฏ ุงูุฌ IBSng ู ุฑุงูโุงูุฏุงุฒ ุขู ุจุง ุงุณุชูุงุฏู ุงุฒ `docker-compose` ู `network_mode: "host"`.
5.  **ุงุฌุงุฏ ุณุฑูุณ ุจฺฉุงูพ**: ฺฉ ุณุฑูุณ `systemd` ุจู ูุงู `ibsng-backup.service` ุจุฑุง ุงุฌุฑุง ุฏุงุฆู ุงุณฺฉุฑูพุช ูุฏุฑุช ุจฺฉุงูพ ุงุฌุงุฏ ู ูุนุงู ูโุดูุฏ.
6.  **ูพฺฉุฑุจูุฏ ูุงุฑูุงู**: ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู `UFW`ุ ูพูุฑุชโูุง ุงูุชุฎุงุจ ุดูุง ุจุงุฒ ูโุดููุฏ.
7.  **ููุงุด ุงุทูุงุนุงุช ููุง**: ุฏุฑ ูพุงุงูุ ุขุฏุฑุณ ุฏุณุชุฑุณ ุจู ูพูู ูุจ IBSng ู ุงุทูุงุนุงุช ูพูุฑุชโูุง ููุงุด ุฏุงุฏู ูโุดูุฏ.

### ูุตุจ ุบุฑุชุนุงูู (Non-Interactive)

ุจุฑุง ูุตุจ ุฎูุฏฺฉุงุฑ ุจุฏูู ุณูุงูุงุช ุชุนุงููุ ูโุชูุงูุฏ ุชูุงู ูพุงุฑุงูุชุฑูุง ุฑุง ูุณุชููุงู ุฏุฑ ุฎุท ูุฑูุงู ุจู ุงุณฺฉุฑูพุช ุงุฑุณุงู ฺฉูุฏ.

**ูุฑูุช ฺฉู ุฏุณุชูุฑ:**

```bash
curl -sSL https://raw.githubusercontent.com/ArashAfkandeh/iBsng-Installer/main/install_ibsng.sh | sudo bash -s -- [WEB_PORT] [AUTH_PORT] [ACCT_PORT] [TOKEN] [CHAT_ID]
```

**ูุซุงู ฺฉุงูู:**

```bash
curl -sSL https://raw.githubusercontent.com/ArashAfkandeh/iBsng-Installer/main/install_ibsng.sh | sudo bash -s -- '80' '1812' '1813' '123456:ABC-DEF123456' '-100123456789'
```

**ุชูุถุญ ูพุงุฑุงูุชุฑูุง:**

| ูพุงุฑุงูุชุฑ | ุชูุถุญุงุช | ููุฏุงุฑ ูพุดโูุฑุถ |
| :--- | :--- | :--- |
| `WEB_PORT` | ูพูุฑุช TCP ุจุฑุง ุฏุณุชุฑุณ ุจู ูพูู ูุจ IBSng. | `80` |
| `AUTH_PORT` | ูพูุฑุช UDP ุจุฑุง ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑุงู (RADIUS Authentication). | `1812` |
| `ACCT_PORT` | ูพูุฑุช UDP ุจุฑุง ุญุณุงุจุฑุณ (RADIUS Accounting). | `1813` |
| `TOKEN` | ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู ุดูุง. | (ุฎุงู) |
| `CHAT_ID` | ุดูุงุณู ฺุช (ุนุฏุฏ) ฺฉุงุฑุจุฑ ุง ฺฉุงูุงู ฺฉู ุจฺฉุงูพโูุง ุจู ุขู ุงุฑุณุงู ูโุดูุฏ. | (ุฎุงู) |

**ูฺฉุงุช ููู:**
- ุงฺฏุฑ ูพุงุฑุงูุชุฑ ุฑุง ุงุฑุงุฆู ูุฏูุฏุ ููุฏุงุฑ ูพุดโูุฑุถ ุขู ุงุณุชูุงุฏู ุฎูุงูุฏ ุดุฏ.
- ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ููุงุฏุฑ ูพุดโูุฑุถ ุจุฑุง ูพูุฑุชโูุง ู ุฏุฑ ุนู ุญุงู ุชูุธู ุชูฺฏุฑุงูุ ูโุชูุงูุฏ ุจู ุฌุง ูพูุฑุชโูุง ููุฏุงุฑ ุฎุงู (`''`) ูุฑุงุฑ ุฏูุฏุ ุงูุง ุงู ุฑูุด ุชูุตู ููโุดูุฏ. ุจูุชุฑ ุงุณุช ููุดู ููุงุฏุฑ ุฑุง ุจู ุตุฑุงุญุช ูุดุฎุต ฺฉูุฏ.

## ๐๏ธ ูพฺฉุฑุจูุฏ ุฑุจุงุช ุชูฺฏุฑุงู

ุงฺฏุฑ ุฏุฑ ุญู ูุตุจ ุงุทูุงุนุงุช ุฑุจุงุช ุฑุง ูุงุฑุฏ ูฺฉุฑุฏูโุงุฏ ุง ูุตุฏ ุชุบุฑ ุขู ุฑุง ุฏุงุฑุฏุ ูุงู ุฒุฑ ุฑุง ูุฑุงุด ฺฉูุฏ:

**ูุณุฑ ูุงู:** `/opt/ibsng/backup_ibsng/config.json`

ูุญุชูุง ูุงู ุจุงุฏ ุจู ุดฺฉู ุฒุฑ ุจุงุดุฏ:

```json
{
    "bot_token": "7816664753:AAGWV-tTGRoFrTsYjJS0dMRDeAEF-clVmEs",
    "chat_id": "5062027097",
    "min_interval_hours": 24,
    "last_backup": 1754370577.5221798
}
```

- `bot_token`: ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู ฺฉู ุงุฒ [@BotFather](https://t.me/BotFather) ุฏุฑุงูุช ูโฺฉูุฏ.
- `chat_id`: ุดูุงุณู ุนุฏุฏ ฺุชุ ฺฉุงุฑุจุฑ ุง ฺฉุงูุงู ฺฉู ูโุฎูุงูุฏ ุจฺฉุงูพโูุง ุจู ุขูุฌุง ุงุฑุณุงู ุดูุฏ. (ุจุฑุง ุฏุฑุงูุช ุจู [@chatIDrobot](https://t.me/chatIDrobot) ูุฑุงุฌุนู ฺฉูุฏ).

ูพุณ ุงุฒ ุฐุฎุฑู ูุงูุ ุณุฑูุณ ุจฺฉุงูพ ุฑุง ุฑุณุชุงุฑุช ฺฉูุฏ ุชุง ุชุบุฑุงุช ุงุนูุงู ุดููุฏ:

```bash
sudo systemctl restart ibsng-backup.service
```

## ๐ฎ ุฏุณุชูุฑุงุช ุฑุจุงุช ุชูฺฏุฑุงู

ุดูุง ูโุชูุงูุฏ ุจุง ุงุฑุณุงู ุฏุณุชูุฑุงุช ุฒุฑ ุจู ุฑุจุงุช ุชูฺฏุฑุงู ุฎูุฏุ ุณุฑูุณ ุฑุง ูุฏุฑุช ฺฉูุฏ. **ุชูุฌู**: ุงู ุฏุณุชูุฑุงุช ููุท ุจุฑุง ฺฉุงุฑุจุฑ ฺฉู `chat_id` ุงู ุฏุฑ ูุงู ฺฉุงููฺฏ ุซุจุช ุดุฏูุ ูุงุจู ุงุณุชูุงุฏู ุงุณุช.

| ุฏุณุชูุฑ | ุชูุถุญุงุช |
| :--- | :--- |
| `/status` | **ููุงุด ูุถุนุช**: ุฒูุงู ุขุฎุฑู ุจฺฉุงูพ ู ุญุฏุงูู ูุงุตูู ุฒูุงู ุชูุธู ุดุฏู ุจู ุจฺฉุงูพโูุง ุฑุง ููุงุด ูโุฏูุฏ. |
| `/backup` | **ุดุฑูุน ุนููุงุช ูพุดุชุจุงูโฺฏุฑ ุฏุณุช**: ุจูุงูุงุตูู ฺฉ ูุณุฎู ูพุดุชุจุงู ุฌุฏุฏ ุงุฒ ูพุงฺฏุงู ุฏุงุฏู ุชูู ู ุจู ุชูฺฏุฑุงู ุงุฑุณุงู ูโฺฉูุฏ. |
| `/restore` | **ุดุฑูุน ุนููุงุช ุจุงุฒุงุจ**: ุฑุจุงุช ุงุฒ ุดูุง ูโุฎูุงูุฏ ูุงู ุจฺฉุงูพ (`.dump.gz` ุง `.bak`) ุฑุง ุงุฑุณุงู ฺฉูุฏ ุชุง ูพุงฺฏุงู ุฏุงุฏู ุฑุง ุจุงุฒุงุจ ฺฉูุฏ. |
| `/time <ุณุงุนุช>` | **ุชูุธู ูุงุตูู ุจฺฉุงูพ**: ุญุฏุงูู ูุงุตูู ุฒูุงู ุจู ุจฺฉุงูพโูุง ุฎูุฏฺฉุงุฑ ุฑุง (ุจู ุณุงุนุช) ุชุบุฑ ูโุฏูุฏ. ูุซุงู: `/time 8` |
| `/cancel` | **ูุบู ุนููุงุช**: ูุฑุขูุฏ ุจุงุฒุงุจ ุฑุง ุฏุฑ ุตูุฑุช ฺฉู ููุชุธุฑ ุฏุฑุงูุช ูุงู ุจุงุดุฏุ ูุบู ูโฺฉูุฏ. |

### ููููู ุชุนุงูู ุจุง ุฑุจุงุช

**ุฏุฑุฎูุงุณุช ุจฺฉุงูพ ุฏุณุช:**

> **User:** `/backup`
>
> **Bot:** `๐ ุฏุฑ ุญุงู ุดุฑูุน ุนููุงุช ุจฺฉุงูพโฺฏุฑ...`
>
> **Bot:** _(ูุงู ุจฺฉุงูพ ุจุง ฺฉูพุดู ุชุงุฑุฎ ู ุฒูุงู ุงุฑุณุงู ูโุดูุฏ)_

**ุฏุฑุฎูุงุณุช ุจุงุฒุงุจ:**

> **User:** `/restore`
>
> **Bot:** `โ๏ธ ูุดุฏุงุฑ ุจุณุงุฑ ููู: ... ูุทูุงู ูุงู ุจฺฉุงูพ ูุนุชุจุฑ ุฑุง ุงุฑุณุงู ฺฉูุฏ.`
>
> **User:** _(ูุงู `IBSng_backup_2024-01-01.dump.gz` ุฑุง ุงุฑุณุงู ูโฺฉูุฏ)_
>
> **Bot:** `๐ ุฏุฑ ุญุงู ุดุฑูุน ุนููุงุช ุจุงุฒุงุจ ุฏุชุงุจุณ...`
>
> **Bot:** _(ฺฏุฒุงุฑุด ูุฑุงุญู ุจุงุฒุงุจ ุฑุง ุงุฑุณุงู ูโฺฉูุฏ)_
>
> **Bot:** `โ ุจุงุฒุงุจ ูพุงฺฏุงู ุฏุงุฏู ุจุง ููููุช ุงูุฌุงู ุดุฏ!`

## ๐ง ูุฏุฑุช ุณุฑูุณ

### ูุฏุฑุช ุณุฑูุณ ุจฺฉุงูพ (ibsng-backup.service)

- **ูุดุงูุฏู ูุถุนุช ุณุฑูุณ:**
  ```bash
  sudo systemctl status ibsng-backup.service
  ```
- **ูุดุงูุฏู ูุงฺฏโูุง ุณุฑูุณ ุจฺฉุงูพ:**
  ```bash
  journalctl -u ibsng-backup.service -f
  ```
- **ุฑโุงุณุชุงุฑุช ฺฉุฑุฏู ุณุฑูุณ:**
  ```bash
  sudo systemctl restart ibsng-backup.service
  ```

### ูุฏุฑุช ฺฉุงูุชูุฑ IBSng

ุจุฑุง ูุฏุฑุช ฺฉุงูุชูุฑ IBSngุ ุจู ูุณุฑ `/opt/ibsng` ุจุฑูุฏ ู ุงุฒ ุฏุณุชูุฑุงุช `docker compose` ุงุณุชูุงุฏู ฺฉูุฏ:

```bash
cd /opt/ibsng
```

- **ูุดุงูุฏู ูุงฺฏโูุง ฺฉุงูุชูุฑ IBSng:**
  ```bash
  docker compose logs -f
  ```
- **ูุชููู ฺฉุฑุฏู ุณุฑูุณ IBSng:**
  ```bash
  docker compose down
  ```
- **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ IBSng:**
  ```bash
  docker compose up -d
  ```

## ๐ ูุฌูุฒ (License)

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ **MIT** ููุชุดุฑ ุดุฏู ุงุณุช. ุจุฑุง ุงุทูุงุนุงุช ุจุดุชุฑ ูุงู `LICENSE` ุฑุง ูุทุงูุนู ฺฉูุฏ.

</div>
